stories:
# There is a special syntax for this. For instance:
# - you don't have to unclude utterances for the form questions
# - you don't need to include "action_listen"
# - you need to put "action: form" and "active_loop: form" after each answer to a form question

# ========== Abdominal pain
- story: Abdominal pain - report pain, don't ask for an ambulance 
  steps:
  - user: |
      I feel some [pain in my stomach]{"entity": "abdominal_pain"}
    intent: patient_reports_pain
  - action: utter_will_ask_medical_questions
  - action: utter_ask_allergy_history
  - user: |
      yes
    intent: affirmative
  - action: action_map_aller_history
  - action: utter_positive_conv_marker
  - action: utter_ask_pain_duration
  - user: |
      it started [yesterday]{"entity": "pain_duration"} and it's been [continuous ever since]{"entity": "pain_duration"}
    intent: inform_pain_duration
  - action: utter_positive_conv_marker
  - action: utter_ask_abdominal_pain_area
  - user: |
      [close to my belly button]{"entity": "abdominal_pain_area"}
    intent: inform_abdominal_pain_area
  - action: utter_positive_conv_marker
  - action: utter_ask_pain_severity
  - user: |
      quite [severe]{"entity": "pain_severity"}, it's [unbearable]{"entity": "pain_severity"}
    intent: inform_pain_severity
  - action: utter_medical_questions_filled
  - action: utter_ask_dispatch_ambulance
  - user: |
      no thanks
    intent: negative
  - action: utter_ask_any_questions
  
- story: Abdominal pain - negative answers
  steps:
  - user: |
      I feel some [pain in my stomach]{"entity": "abdominal_pain"}
    intent: patient_reports_pain
  - action: utter_will_ask_medical_questions
  - action: utter_ask_allergy_history
  - user: |
      I don't know
    intent: negative
  - action: utter_negative_conv_marker
  - action: utter_ask_pain_duration
  - user: |
      I don't know
    intent: negative
  - action: utter_negative_conv_marker
  - action: utter_ask_abdominal_pain_area
  - user: |
      I don't know
    intent: negative
  - action: utter_negative_conv_marker
  - action: utter_ask_pain_severity
  - user: |
      I don't know
    intent: negative
  - action: utter_medical_questions_filled
  - action: utter_ask_dispatch_ambulance
  - user: |
      no thanks
    intent: negative
  - action: utter_ask_any_questions
  
# ========== Respiratory difficulty 
- story: Respiratory difficulty - report pain, don't ask for an ambulance 
  steps:
  - user: |
      I have some [difficulty breathing]{"entity": "respiratory_difficulty"}
    intent: patient_reports_pain
  - action: utter_will_ask_medical_questions
  - action: utter_ask_pain_duration
  - user: |
      it started [yesterday]{"entity": "pain_duration"}
    intent: inform_pain_duration
  - action: utter_positive_conv_marker
  - action: utter_ask_resp_difficulty_triggers
  - user: |
      I live in a city with high level of [pollution]{"entity": "resp_difficulty_triggers"}
    intent: inform_resp_difficulty_triggers
  - action: utter_positive_conv_marker
  - action: utter_ask_pain_severity
  - user: |
      [moderate]{"entity": "pain_severity"}, it quite hurts
    intent: inform_pain_severity
  - action: utter_medical_questions_filled
  - action: utter_ask_dispatch_ambulance
  - user: |
      no thanks
    intent: negative
  - action: utter_ask_any_questions

- story: Respiratory difficulty - doesn't know 
  steps:
  - user: |
      I have some [difficulty breathing]{"entity": "respiratory_difficulty"}
    intent: patient_reports_pain
  - action: utter_will_ask_medical_questions
  - action: utter_ask_pain_duration
  - user: |
      I don't know
    intent: negative
  - action: utter_negative_conv_marker
  - action: utter_ask_resp_difficulty_triggers
  - user: |
      I don't know
    intent: negative
  - action: utter_negative_conv_marker
  - action: utter_ask_pain_severity
  - user: |
      I don't know
    intent: negative
  - action: utter_medical_questions_filled
  - action: utter_ask_dispatch_ambulance
  - user: |
      no thanks
    intent: negative
  - action: utter_ask_any_questions

# ========== Fainting 
- story: Fainting - report pain, don't ask for an ambulance 
  steps:
  - user: |
      I think I just [blacked out]{"entity": "fainting"}
    intent: patient_reports_pain
  - action: utter_will_ask_medical_questions
  - action: utter_ask_pain_duration
  - user: |
      it started [yesterday]{"entity": "pain_duration"}
    intent: inform_pain_duration
  - action: utter_positive_conv_marker
  - action: utter_ask_fainting_prior
  - user: |
      My vision became [blurry]{"entity": "fainting_prior"}
    intent: inform_fainting_prior
  - action: utter_positive_conv_marker
  - action: utter_ask_fainting_medical_conditions
  - user: |
      yes, I am a positive carrier of [anemia]{"entity": "fainting_medical_conditions"}
    intent: inform_fainting_medical_conditions
  - action: utter_medical_questions_filled
  - action: utter_ask_dispatch_ambulance
  - user: |
      no thanks
    intent: negative
  - action: utter_ask_any_questions

- story: Fainting - doesn't know
  steps:
  - user: |
      I think I just [blacked out]{"entity": "fainting"}
    intent: patient_reports_pain
  - action: utter_will_ask_medical_questions
  - action: utter_ask_pain_duration
  - user: |
      I don't know
    intent: negative
  - action: utter_positive_conv_marker
  - action: utter_ask_fainting_prior
  - user: |
      I don't know
    intent: negative
  - action: utter_positive_conv_marker
  - action: utter_ask_fainting_medical_conditions
  - user: |
      I don't know
    intent: negative
  - action: utter_medical_questions_filled
  - action: utter_ask_dispatch_ambulance
  - user: |
      no thanks
    intent: negative
  - action: utter_ask_any_questions