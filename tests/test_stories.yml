
stories:

# - action: action_deactivate_loop # stop the current form and reset all

# Happy paths
- story: User greets
  steps:
    - intent: greet
    - action: utter_greet
    - checkpoint: user_said_hello

# ========== Path 1
- story: User needs an ambulance, the agent guides the conversation
  steps:
    - checkpoint: user_said_hello
    - intent: patient_needs_ambulance
    - action: utter_please_provide_general_info
    - action: form_general_info
    - active_loop: form_general_info
    - slot_was_set:
      - requested_slot: null
    - active_loop: null
    - slot_was_set:
      - patient_homeaddr: address
      - patient_phonenmbr: 123
    - action: utter_start_medical_questions
    - checkpoint: user_provided_general_info

# ========== Path 2
- story: User reports a specific pain, without general info
  steps:
    - checkpoint: user_said_hello
    - intent: patient_reports_pain
      entities:
      - pain_abdominal_pain: pain in my abdomen
    - slot_was_set:
      - pain_abdominal_pain: pain in my abdomen
    - action: form_emergency_abdominal_pain
    - active_loop: form_emergency_abdominal_pain
    - slot_was_set:
      - requested_slot: null
    - active_loop: null
    - slot_was_set:
      - patient_homeaddr: null
      - patient_phonenmbr: null
    - action: utter_conclude_abdominal_pain

# ========== Path 3
- story: User provided general info, now reports a pain 
  steps:
    - checkpoint: user_provided_general_info
    - intent: patient_reports_pain
      entities:
      - pain_abdominal_pain: pain in my abdomen
    - slot_was_set:
      - pain_abdominal_pain: pain in my abdomen
    - action: form_emergency_abdominal_pain
    - active_loop: form_emergency_abdominal_pain
    - slot_was_set:
      - requested_slot: null
    - active_loop: null
    - action: utter_conclude_abdominal_pain



