version: "3.1"

# Sources:
# https://rasa.com/docs/rasa/stories/#checkpoints
# https://rasa.com/docs/rasa/forms/#writing-stories--rules-for-unhappy-form-paths

# Notes:
# - should use checkpoints, it's way easier to jump around

# unhappy paths:
# - provides pathology first
# - provides home address first
# - provides phone number first

stories:

# - action: action_deactivate_loop # stop the current form and reset all

# Happy paths
- story: User greets, the agent guides the conversation
  steps:
    - intent: greet
    - action: utter_greet
    - action: form_general_info
    - active_loop: form_general_info
    - slot_was_set:
      - requested_slot: null
    - active_loop: null
    - action: utter_start_medical_questions
    - slot_was_set:
      - patient_homeaddr: address
      - patient_phonenmbr: 123
    - intent: patient_reports_pain
      entities:
      - pain_abdominal_pain: pain in my abdomen
    - slot_was_set:
      - pain_abdominal_pain: pain in my abdomen
    - action: form_emergency_abdominal_pain
    - active_loop: form_emergency_abdominal_pain
    - slot_was_set:
      - requested_slot: null
    - active_loop: null
    - action: utter_conclude_abdominal_pain

- story: User reports abdominal pain first
  steps:
  - intent: patient_reports_pain
    entities:
    - pain_abdominal_pain: pain in my abdomen
  - slot_was_set:
    - pain_abdominal_pain: pain in my abdomen
  - action: form_emergency_abdominal_pain
  - active_loop: form_emergency_abdominal_pain
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: utter_please_provide_general_info
  - action: form_general_info
  - active_loop: form_general_info
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: utter_conclude_abdominal_pain



