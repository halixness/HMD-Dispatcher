version: "3.1"

intents:
- greet
- affirmative
- negative
- patient_inputs_coordinates
- patient_reports_pain
- patient_asks_cause
- patient_needs_ambulance
- patient_wants_human_agent
- inform_pain_duration
- inform_pain_severity
- inform_pain_location
- inform_pain_nature
- inform_pain_symptoms
- inform_pain_history
- inform_pain_relieving
- inform_abdominal_pain_area
- inform_resp_difficulty_triggers
- inform_hypothermia_skin_color
- inform_hypothermia_treatment
- inform_aller_cause
- inform_aller_symptoms
- inform_aller_history
- inform_fainting_prior
- inform_fainting_patterns
- inform_fall_conscious
- inform_fall_movement
- inform_fever_temperature
- inform_headache_lifestyle

entities:
- patient_phonenmbr
- patient_homeaddr
- abdominal_pain
- respiratory_difficulty
- fainting
- poisoning
- hypothermia
- allergic_reaction
- fall
- fever
- headache
- pain_duration
- pain_severity
- pain_location
- pain_nature
- pain_symptoms
- pain_history
- pain_relieving
- abdominal_pain_area
- hypothermia_skin_color
- hypothermia_treatment
- allergy_cause
- allergy_symptoms
- allergy_history
- fall_conscious
- fall_move
- fever_temperature
- headache_lifestyle

# https://rasa.com/blog/how-to-use-global-slot-mappings/
slots:
  # ============== Reported pathologies ==============
  is_pain_reported:
    type: bool
    influence_conversation: true
    mappings:
    - type: custom
      action: action_toggle_is_pain_reported
  abdominal_pain:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: abdominal_pain
  respiratory_difficulty:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: respiratory_difficulty
  fainting:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: fainting
  hypothermia:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: hypothermia
  
  allergy:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: allergic_reaction
  
  fall:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: fall

  fever:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: fever
  
  headache:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: headache


  # ============== Patient coordinates ==============
  patient_homeaddr:
    type: text
    mappings:
    - type: from_entity
      entity: patient_homeaddr
      conditions:
      - active_loop: form_general_info
  patient_phonenmbr:
    type: text
    mappings:
    - type: from_entity
      entity: patient_phonenmbr
      conditions:
      - active_loop: form_general_info

  # ============== General medical questions ==============
  pain_duration:
    type: text
    mappings:
    - type: custom
      action: action_map_pain_duration

  pain_severity:
    type: text
    mappings:
    - type: custom
      action: action_map_pain_severity

  pain_location:
    type: text
    mappings:
    - type: custom
      action: action_map_pain_location
  
  pain_nature:
    type: text
    mappings:
    - type: custom
      action: action_map_pain_nature
  
  pain_symptoms:
    type: text
    mappings:
    - type: custom
      action: action_map_pain_symptoms
  
  pain_history:
    type: text
    mappings:
    - type: custom
      action: action_map_pain_history

  pain_relieving:
    type: text
    mappings:
    - type: custom
      action: action_map_pain_relieving

  # ============== Abdominal pain questions ==============
  abdominal_pain_area:
    type: text
    mappings:
    - type: custom
      action: action_map_abdominal_pain_area

  # ============== Respiratory difficulty questions ==============

  resp_difficulty_triggers:
    type: text
    mappings:
    - type: custom
      action: action_map_resp_difficulty_triggers

  # ============== Hypothermia questions ==============
  hypothermia_skin_color:
    type: text
    mappings:
    - type: custom
      action: action_map_hypothermia_skin_color
  hypothermia_treatment:
    type: text
    mappings:
    - type: custom
      action: action_map_hypothermia_treatment
   # ============== Allergy reaction questions ==============
  aller_cause:
    type: text
    mappings:
    - type: custom
      action: action_map_aller_cause
  aller_symptoms:
    type: text
    mappings:
    - type: custom
      action: action_map_aller_symptoms
  aller_history:
    type: text
    mappings:
    - type: custom
      action: action_map_aller_history
  # ============== fall questions ==============
  fall_conscious:
    type: text
    mappings:
    - type: custom
      action: action_map_aller_cause
  fall_movement:
    type: text
    mappings:
    - type: custom
      action: action_map_aller_cause
  # =============== fever questions ==============
  fever_temperature:
    type: text
    mappings:
    - type: custom
      action: action_map_fever_temperature
  # =============== headache ====================
  headache_lifestyle:
    type: text
    mappings:
    - type: custom
      action: action_map_headachelifestyle


actions:
- utter_positive_conv_marker
- utter_negative_conv_marker
- utter_medical_questions_filled
- utter_proceed_asking_pain
- validate_form_general_info
- action_ask_patient_homeaddr
- action_submit_patient_coordinates
- action_submit_emergency_form
- utter_greet
- utter_question_issue
- utter_repeat_last_time
- utter_please_rephrase
- utter_please_specify_pathology
- utter_please_provide_general_info
- utter_invalid_patient_homeaddr
- utter_transferring_to_human
- utter_ask_dispatch_ambulance
- utter_confirm_ambulance_sent
- utter_goodbye
- utter_start_QA
- action_map_pain_duration
- action_map_pain_severity
- action_map_pain_location
- action_map_pain_nature
- action_map_pain_symptoms
- action_map_pain_history
- action_map_pain_relieving
- action_map_hypothermia_skin_color
- action_map_hypothermia_treatment
- action_toggle_is_pain_reported
- action_map_resp_difficulty_triggers
- action_map_aller_cause
- action_map_aller_symptoms
- action_map_aller_history
- utter_will_ask_medical_questions
- utter_ask_pain_severity
- utter_ask_pain_duration
- utter_ask_fainting_prior
- utter_ask_fainting_patterns
- action_map_fall_conscious
- action_map_fall_movement
- action_map_fever_temperature
- action_map_headachelifestyle


responses:

  utter_positive_conv_marker:
  - text: Got it.
  - text: I see.
  - text: Ok.
  - text: Alright.
  
  utter_negative_conv_marker:
  - text: Ok, no problem.
  - text: Alright, that's fine.
  - text: That's fine.

  utter_will_ask_medical_questions:
  - text: I see, I am going to ask you some detailed questions to be as accurate as possible, don't worry if you can't answer fully.
  
  utter_proceed_asking_pain:
  - text: Ok, now could you tell me more about your problem?
  - text: Thank you, now can you tell me what problem are you experiencing?

  utter_question_issue:
  - text: Tell me what's the issue.
  - text: What is your emergency?
  - text: What is the problem you are experiencing?

  utter_repeat_last_time:
  - text: Let's retry one last time.

  utter_please_rephrase:
  - text: I'm sorry, I didn't quite understand that. Could you rephrase?
  - text: Could you please rephrase that? I'm having trouble understanding.
  - text: I didn't grasp your message completely. Can you put it differently?
  - text: I'm a bit confused; can you reword your statement for clarity?
  - text: Sorry, I didn't catch that. Could you express it in another way?

  utter_greet:
  - text: Hello, this is the Ambulance Emergency Dispatcher. To talk with a human operator, just ask anytime.

  utter_please_specify_pathology:
  - text: Sorry, I need you to give me some details about your pathology first.

  utter_please_provide_general_info:
  - text: Ok, to possibly send help for your emergency, I need some details first.
  - text: Ok, I'm going to ask you some contact details first.

  # =================================================

  ask_patient_homeaddr:
  - text: Can you {verb} your home address, please?
  
  utter_invalid_patient_homeaddr:
  - text: I'm sorry, we can't find this address on the map.
  
  utter_ask_patient_phonenmbr:
  - text: And what's your phone number?

  utter_medical_questions_filled:
  - text: Ok, I have collected all the necessary info about your problem.
  
  utter_transferring_to_human:
  - text: Ok, I'm transferring you to a human operator.
  - text: Alright, I'll connect you to a human operator.
  - text: Sure thing, I'll transfer you to a human agent.
  - text: No worries, I'm redirecting you to a human operator.
  - text: Okay, I'm putting you through to a human agent.
  - text: Understood, initiating transfer to a human operator.

  utter_ask_dispatch_ambulance:
  - text: I can provide you with some general indications about your problem. But first, Would you like to receive assistance through an ambulance?
  - text: I can answer to some common questions about your problem. But first, do you want us to send an ambulance to your house?

  utter_confirm_ambulance_sent:
  - text: An ambulance has been dispatched to your address.
  - text: Paramedics are on their way.

  utter_ask_any_questions:
  - text: Do you have any questions?

  utter_goodbye:
  - text: Alright, I hope I've been helpful. For any question, ask right away anytime!
  
  utter_start_QA:
  - text: Alright, you can ask any general information about your problem, please remember you can always speak with a human operator, just ask it! 


  # ============== General medical questions ==============
  
  utter_ask_pain_duration:
  - text: When did you first notice the pain, and is it continuous or intermittent?
  - text: Tell me about the onset of the pain. Is it persistent or comes and goes?
  - text: When did the pain begin, and has it been steady or sporadic? How long has it persisted?

  utter_ask_pain_severity:
  - text: Using a scale from 0 to 10, how would you rate the intensity of your pain?
  - text: On a scale of 0 to 10, how severe is the pain you're experiencing?
  - text: If 0 means no pain and 10 is the most severe, where would you place your pain level?
  - text: Can you quantify the pain on a scale from 0 to 10?

  # ============== Abdominal pain questions ==============
  utter_ask_abdominal_pain_area:
  - text: Where exactly in your abdomen do you feel the pain? (e.g., upper or lower abdomen, left side, close to the belly button or the ribs)
  - text: Can you pinpoint the specific location of the abdominal pain? (e.g., upper or lower abdomen, left side, close to the belly button or the ribs)
  - text: In which area of your abdomen is the pain most concentrated? (e.g., upper or lower abdomen, left side, close to the belly button or the ribs)

  # ============== Respiratory difficulty questions ==============
  utter_ask_resp_difficulty_triggers:
  - text: Have you identified any specific triggers or activities that worsen the respiratory distress?
  - text: Have you pinpointed any particular factors or actions that exacerbate the respiratory difficulties?
  - text: Are there specific triggers or behaviors you've recognized that contribute to the worsening of respiratory distress?
  
  # ============== Fainting questions ==============
  utter_ask_fainting_prior:
  - text: Can you describe the events leading up to the fainting episode?
  - text: Could you provide a detailed account of the circumstances that preceded the fainting incident?
  - text: What happened before the person fainted? Please describe the events leading up to it.

  utter_ask_fainting_patterns:
  - text: Have you noticed any specific triggers or patterns associated with your fainting episodes?
  - text: Have you identified any particular factors or recurring patterns linked to your episodes of fainting?
  - text: Are there specific triggers or regular patterns that you've observed in connection with your instances of fainting?

  # ============== Hypothermia pain questions ==============
  utter_ask_hypothermia_skin_color:
  - text: Have you noticed any changes in your skin color or temperature, such as paleness or coolness to the touch?
  - text: Have you observed any alterations in your skin's color or temperature, such as becoming paler or cooler to the touch?
  - text: Did your skin color change?

  utter_ask_hypothermia_treatment:
  - text: Do you have any medical conditions or take any medications that might affect your body's response to cold?
  - text: Do you have adequate clothing or treatment when you felt bad?
  - text: Have you recieved any treatment after feeling bad?

  # ============== allergy questions ==============
  utter_ask_allergy_cause:
  - text: Are you aware of any specific allergen exposure or trigger that might have caused the reaction?
  - text: Have you recently consumed any new foods or medications?
  - text: Were you exposed to any environmental factors, such as insect stings or plants?

  utter_ask_allergy_symptoms:
  - text: Are you experiencing any difficulty breathing or shortness of breath?
  - text: Have you noticed any swelling in your face, lips, tongue, or throat?
  - text: Are there any gastrointestinal symptoms, such as abdominal pain, nausea, or vomiting?

  utter_ask_allergy_history:
  - text: Do you have a history of allergies or allergic reactions?
  - text: Have you experienced any allergic reaction in the past?

  # ============== fall questions ==============
  utter_ask_conscious:
  - text: Are you conscious and able to communicate clearly?
  - text: Have you lost consciousness at any point since the fall?
  
  utter_ask_movement: 
  - text: Can you move your limbs? Any difficulty moving your arms or legs?
  - text: Have you attempted to stand or move since the fall?

  # ============== fever questions ==============
  utter_ask_temperature:
  - text: Have you measured your temperature, and if so, what was it?
  - text: Have you checked your temperature, and if yes, what was the result?
  - text: Were you able to measure your temperature, and if you were, what did it show?

  # ============== headache question =============
  utter_ask_headache_lifestyle:
  - text: How would you describe your sleep patterns?
  - text: Has there been any change in your sleep habits?
  - text: Can you provide details about your typical sleep patterns?

  # =================================================

forms:
  form_general_info:
    required_slots:
      - patient_homeaddr
      - patient_phonenmbr
