version: '3.1'

intents:
- greet
- patient_inputs_coordinates
- patient_reports_pain
- patient_asks_cause
- patient_needs_ambulance
- patient_wants_human_agent
- affirmative
- negative
- inform_pain_description

entities:
- patient_phonenmbr
- patient_homeaddr
- abdominal_pain
- respiratory_difficulty
- fainting
- poisoning
- hypothermia
# ==== just to avoid warnings
- pain_duration
- pain_severity
- abdominal_pain_area
- abdominal_other_symptoms
# ==== 
- hypothermia_skin_color
- hypothermia_treatment

# https://rasa.com/blog/how-to-use-global-slot-mappings/
slots:
  hypothermia:
    type: text
    mappings:
    - type: from_entity
      entity: hypothermia

  abdominal_pain:
    type: text
    mappings:
    - type: from_entity
      entity: abdominal_pain
      # can overwriting this slot cause twisting the story? check it
  patient_homeaddr:
    type: text
    mappings:
    - type: from_entity
      entity: patient_homeaddr
      conditions:
      - active_loop: form_general_info
  patient_phonenmbr:
    type: text
    mappings:
    - type: from_entity
      entity: patient_phonenmbr
      conditions:
      - active_loop: form_general_info
  # ============== General medical questions ==============
  pain_duration:
    type: text
    mappings:
    - type: custom
      action: action_map_pain_duration
  pain_severity:
    type: text
    mappings:
    - type: custom
      action: action_map_pain_severity

  # ============== Abdominal pain questions ==============
  abdominal_pain_area:
    type: text
    mappings:
    - type: custom
      action: action_map_abdominal_pain_area
  abdominal_other_symptoms:
    type: text
    mappings:
    - type: custom
      action: action_map_abdominal_other_symptoms
  # ============== hypothermia questions ==============
  hypothermia_skin_color:
    type: text
    mappings:
    - type: custom
      action: action_map_hypothermia_skin_color
  hypothermia_treatment:
    type: text
    mappings:
    - type: custom
      action: action_map_hypothermia_treatment


actions:
- utter_medical_questions_filled
- utter_proceed_asking_pain
- validate_form_general_info
- action_ask_patient_homeaddr
- action_set_pathology
- action_submit_patient_coordinates
- action_submit_emergency_form
- utter_greet
- utter_question_issue
- utter_repeat_last_time
- utter_please_rephrase
- utter_please_specify_pathology
- utter_please_provide_general_info
- utter_invalid_patient_homeaddr
- utter_transferring_to_human
- utter_ask_dispatch_ambulance
- utter_confirm_ambulance_sent
- utter_goodbye
- utter_start_QA
- action_map_pain_duration
- action_map_pain_severity
- action_map_abdominal_pain_area
- action_map_abdominal_other_symptoms
- action_map_hypothermia_skin_color
- action_map_hypothermia_treatment

responses:

  utter_will_ask_medical_questions:
  - text: I see, I am going to ask you some detailed questions to be as accurate as possible, don't worry if you can't answer fully.
  
  utter_proceed_asking_pain:
  - text: Ok, now could you tell me more about your problem?
  - text: Thank you, now can you tell me what problem are you experiencing?

  utter_question_issue:
  - text: Tell me what's the issue.
  - text: What is your emergency?
  - text: What is the problem you are experiencing?

  utter_repeat_last_time:
  - text: Let's retry one last time.

  utter_please_rephrase:
  - text: I'm sorry, I didn't quite understand that. Could you rephrase?
  - text: Could you please rephrase that? I'm having trouble understanding.
  - text: I didn't grasp your message completely. Can you put it differently?
  - text: I'm a bit confused; can you reword your statement for clarity?
  - text: Sorry, I didn't catch that. Could you express it in another way?

  utter_greet:
  - text: Hello, this is the Ambulance Emergency Dispatcher. To talk with a human operator, just ask anytime.

  utter_please_specify_pathology:
  - text: Sorry, I need you to give me some details about your pathology first.

  utter_please_provide_general_info:
  - text: Ok, to possibly send help for your emergency, I need some details first.
  - text: Ok, I'm going to ask you some contact details first.

  # =================================================

  ask_patient_homeaddr:
  - text: Can you {verb} your home address, please?
  utter_invalid_patient_homeaddr:
  - text: I'm sorry, we can't find this address on the map.
  utter_ask_patient_phonenmbr:
  - text: And what's your phone number?

  # ============== General medical questions ==============
  
  utter_ask_pain_nature:
  - text: How would you describe the sensation of the pain? (sharp, dull, etc.)
  - text: Can you tell me more about the kind of pain you're experiencing? (sharp, dull, etc.)
  - text: In what way is the pain manifesting? (sharp, dull, etc.)
  - text: What words would you use to characterize the pain?

  utter_ask_pain_location:
  - text: Can you point to the exact location of the pain? Does it move elsewhere?
  - text: Tell me where it hurts, and does the pain travel to other parts of your body?
  - text: Pinpoint the specific area of discomfort. Does it radiate anywhere else?
  - text: Identify the spot of pain, and does it extend to other regions?
  - text: Describe the location of the pain and any spreading sensations.

  utter_ask_pain_duration:
  - text: When did you first notice the pain, and is it continuous or intermittent?
  - text: Tell me about the onset of the pain. Is it persistent or comes and goes?
  - text: When did the pain begin, and has it been steady or sporadic? How long has it persisted?

  utter_ask_pain_severity:
  - text: Using a scale from 0 to 10, how would you rate the intensity of your pain?
  - text: On a scale of 0 to 10, how severe is the pain you're experiencing?
  - text: If 0 means no pain and 10 is the most severe, where would you place your pain level?
  - text: Can you quantify the pain on a scale from 0 to 10?

  utter_ask_pain_relieving:
  - text: Are there certain things you do that either worsen or alleviate the pain?
  - text: Can you identify any actions or postures that affect the pain positively or negatively?
  - text: Do certain activities or positions bring relief or aggravate the pain?
  - text: Are there particular movements or positions that either help or worsen the pain?
  - text: Describe any actions or postures that impact the pain positively or negatively.

  utter_ask_pain_symptoms:
  - text: Aside from the pain, are you experiencing any other symptoms like nausea or dizziness?
  - text: Tell me if there are any additional symptoms accompanying the pain.
  - text: Do you notice any other changes in your body, like sweating or shortness of breath?
  - text: Are there other feelings or symptoms occurring along with the pain?
  - text: Describe any other sensations or symptoms you're currently having.

  utter_ask_pain_history:
  - text: Are you currently being treated for any medical conditions or taking any medications?
  - text: Tell me about any pre-existing health conditions or medications you're on.
  - text: Have you been diagnosed with any medical issues, and are you taking any regular medications?
  - text: Share information about your medical history and any prescribed medications.
  - text: Describe any known health conditions and the medications you're currently using.

  utter_ask_pain_trauma:
  - text: Did something happen recently that might be linked to the onset of the pain?
  - text: Tell me if there were any recent injuries or accidents connected to the pain.
  - text: Have you encountered any trauma or incidents that could be associated with the pain?
  - text: Describe any recent events or injuries that might be related to the pain.
  - text: Share details about any recent traumas or accidents that could be relevant to the pain.

  utter_ask_pain_allergies:
  - text: Do you have any known allergies to medications or other substances?
  - text: Are there any medications or substances that you're allergic to?
  - text: Tell me if you have any known allergies, especially to medications.
  - text: Provide information on any allergies you have, especially related to medications.
  - text: Mention if there are any substances or medications you are allergic to.

  utter_ask_pain_warnings:
  - text: Do you notice any signs of emergency, such as difficulty breathing or chest pain?
  - text: Are you observing any indications of an emergency, like trouble breathing or chest discomfort?
  - text: Have you spotted any emergency signs, like struggling to breathe or experiencing chest pain?
  - text: Do you see any emergency warning signs, such as trouble with breathing or pain in the chest?
  - text: Are there any signs of emergency, such as difficulty in breathing or chest pain, that you're noticing?

  # ============== Abdominal pain questions ==============

  utter_ask_abdominal_pain_area:
  - text: Where exactly in your abdomen do you feel the pain? (e.g., upper, lower, left, right, centralized)
  - text: Can you pinpoint the specific location of the abdominal pain? (e.g., upper, lower, left, right, central)
  - text: In which area of your abdomen is the pain most concentrated? (e.g., upper, lower, left, right)
  
  utter_ask_abdominal_other_symptoms:
  - text: Are there any other symptoms accompanying the abdominal pain, such as nausea, vomiting, changes in bowel habits, or fever?
  - text: Do you have any additional symptoms along with the abdominal pain, like nausea, vomiting, alterations in bowel habits, or fever?
  - text: Are there any other signs present with the abdominal pain, such as nausea, vomiting, shifts in bowel patterns, or an elevated body temperature?

  # ============== Hypothermia pain questions ==============
  utter_ask_hypothermia_skin_color:
  - text: Have you noticed any changes in your skin color or temperature, such as paleness or coolness to the touch?
  - text: Have you observed any alterations in your skin's color or temperature, such as becoming paler or cooler to the touch?
  - text: Did your skin color change?

  utter_ask_hypothermia_treatment:
  - text: Do you have any medical conditions or take any medications that might affect your body's response to cold?
  - text: Do you have adequate clothing or treatment when you felt bad?
  - text: Have you recieved any treatment after feeling bad?


  # =================================================

  utter_medical_questions_filled:
  - text: Ok, I have collected all the necessary info about your problem.
  
  utter_transferring_to_human:
  - text: Ok, I'm transferring you to a human operator.
  - text: Alright, I'll connect you to a human operator.
  - text: Sure thing, I'll transfer you to a human agent.
  - text: No worries, I'm redirecting you to a human operator.
  - text: Okay, I'm putting you through to a human agent.
  - text: Understood, initiating transfer to a human operator.

  utter_ask_dispatch_ambulance:
  - text: I can provide you with some general indications about your problem. But first, Would you like to receive assistance through an ambulance?
  - text: I can answer to some common questions about your problem. But first, do you want us to send an ambulance to your house?

  utter_confirm_ambulance_sent:
  - text: An ambulance has been dispatched to your address.
  - text: Paramedics are on their way.

  utter_ask_any_questions:
  - text: Do you have any questions?

  utter_goodbye:
  - text: Alright, I hope I've been helpful. For any question, ask right away anytime!
  
  utter_start_QA:
  - text: Alright, you can ask any general information about your problem, please remember you can always speak with a human operator, just ask it! 

    # =================================================

forms:
  form_general_info:
    required_slots:
      - patient_homeaddr
      - patient_phonenmbr
