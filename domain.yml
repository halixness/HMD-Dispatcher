version: "3.1"

intents:
- greet
- affirmative
- negative
- patient_inputs_coordinates
- patient_reports_pain
- patient_asks_cause
- patient_needs_ambulance
- patient_wants_human_agent
- inform_pain_duration
- inform_pain_severity
- inform_pain_location
- inform_pain_nature
- inform_pain_symptoms
- inform_pain_history
- inform_pain_relieving
- inform_abdominal_pain_area
- inform_resp_difficulty_triggers
- inform_hypothermia_skin_color
- inform_hypothermia_env
- inform_aller_cause
- inform_aller_symptoms
- inform_fainting_prior
- inform_fainting_medical_conditions
- inform_fall_conscious
- inform_fall_movement
- inform_fever_temperature
- inform_headache_lifestyle

entities:
- patient_phonenmbr
- patient_homeaddr
- abdominal_pain
- respiratory_difficulty
- fainting
- poisoning
- hypothermia
- allergic_reaction
- fall
- fever
- headache
- pain_duration
- pain_severity
- pain_location
- pain_nature
- pain_symptoms
- pain_history
- pain_relieving
- abdominal_pain_area
- hypothermia_skin_color
- hypothermia_env
- allergy_cause
- allergy_symptoms
- fall_conscious
- fall_move
- fever_temperature
- headache_lifestyle
- resp_difficulty_triggers
- fainting_prior
- fainting_medical_conditions

# https://rasa.com/blog/how-to-use-global-slot-mappings/
slots:
  # ============== Reported pathologies ==============
  is_pain_reported:
    type: bool
    influence_conversation: true
    mappings:
    - type: custom
      action: action_toggle_is_pain_reported
  abdominal_pain:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: abdominal_pain
  respiratory_difficulty:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: respiratory_difficulty
  fainting:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: fainting
  hypothermia:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: hypothermia
  
  allergic_reaction:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: allergic_reaction
  
  fall:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: fall

  fever:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: fever
  
  headache:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: headache


  # ============== Patient coordinates ==============
  patient_homeaddr:
    type: text
    mappings:
    - type: from_entity
      entity: patient_homeaddr
      conditions:
      - active_loop: form_general_info
  patient_phonenmbr:
    type: text
    mappings:
    - type: from_entity
      entity: patient_phonenmbr
      conditions:
      - active_loop: form_general_info

  # ============== General medical questions ==============
  pain_duration:
    type: text
    mappings:
    - type: custom
      action: action_map_pain_duration

  pain_severity:
    type: text
    mappings:
    - type: custom
      action: action_map_pain_severity

  pain_location:
    type: text
    mappings:
    - type: custom
      action: action_map_pain_location
  
  pain_nature:
    type: text
    mappings:
    - type: custom
      action: action_map_pain_nature
  
  pain_symptoms:
    type: text
    mappings:
    - type: custom
      action: action_map_pain_symptoms
  
  pain_history:
    type: text
    mappings:
    - type: custom
      action: action_map_pain_history

  pain_relieving:
    type: text
    mappings:
    - type: custom
      action: action_map_pain_relieving

  # ============== Abdominal pain questions ==============
  abdominal_pain_area:
    type: text
    mappings:
    - type: custom
      action: action_map_abdominal_pain_area

  # ============== Respiratory difficulty questions ==============

  resp_difficulty_triggers:
    type: text
    mappings:
    - type: custom
      action: action_map_resp_difficulty_triggers

  # ============== Fainting questions ==============

  fainting_prior:
    type: text
    mappings:
    - type: custom
      action: action_map_fainting_prior

  fainting_medical_conditions:
    type: text
    mappings:
    - type: custom
      action: action_map_fainting_medical_conditions

  # ============== Hypothermia questions ==============
  hypothermia_skin_color:
    type: text
    mappings:
    - type: custom
      action: action_map_hypothermia_skin_color
  hypothermia_skin_env:
    type: text
    mappings:
    - type: custom
      action: action_map_hypothermia_env

   # ============== Allergy reaction questions ==============
  aller_cause:
    type: text
    mappings:
    - type: custom
      action: action_map_aller_cause
  aller_symptoms:
    type: text
    mappings:
    - type: custom
      action: action_map_aller_symptoms
  aller_history:
    type: bool
    mappings:
    - type: custom
      action: action_map_aller_history
  # ============== fall questions ==============
  fall_conscious:
    type: text
    mappings:
    - type: custom
      action: action_map_aller_cause
  fall_movement:
    type: text
    mappings:
    - type: custom
      action: action_map_aller_cause
  # =============== fever questions ==============
  fever_temperature:
    type: text
    mappings:
    - type: custom
      action: action_map_fever_temperature
  fever_travel:
    type: bool
    mappings:
    - type: custom
      action: action_map_fever_travel
  # =============== headache ====================
  headache_lifestyle:
    type: text
    mappings:
    - type: custom
      action: action_map_headachelifestyle


actions:
- utter_positive_conv_marker
- utter_negative_conv_marker
- utter_medical_questions_filled
- utter_proceed_asking_pain
- validate_form_general_info
- action_ask_patient_homeaddr
- action_submit_patient_coordinates
- action_submit_emergency_form
- utter_greet
- utter_question_issue
- utter_repeat_last_time
- utter_please_rephrase
- utter_please_specify_pathology
- utter_please_provide_general_info
- utter_invalid_patient_homeaddr
- utter_transferring_to_human
- utter_ask_dispatch_ambulance
- utter_confirm_ambulance_sent
- utter_goodbye
- utter_start_QA
- action_map_pain_duration
- action_map_pain_severity
- action_map_pain_location
- action_map_pain_nature
- action_map_pain_symptoms
- action_map_pain_history
- action_map_pain_relieving
- action_map_hypothermia_skin_color
- action_map_hypothermia_env
- action_toggle_is_pain_reported
- action_map_resp_difficulty_triggers
- action_map_aller_cause
- action_map_aller_symptoms
- action_map_aller_history
- utter_will_ask_medical_questions
- utter_ask_pain_severity
- utter_ask_pain_duration
- utter_ask_abdominal_pain_area
- utter_ask_resp_difficulty_triggers
- utter_ask_fainting_prior
- utter_ask_hypothermia_skin_color
- utter_ask_hypothermia_env
- utter_ask_allergy_cause
- utter_ask_allergy_symptoms
- utter_ask_allergy_history
- utter_ask_travel
- utter_ask_temperature
- action_map_fall_conscious
- action_map_fall_movement
- action_map_fever_temperature
- action_map_fever_travel
- action_map_headachelifestyle
- action_map_fainting_prior
- action_map_fainting_medical_conditions



responses:

  utter_positive_conv_marker:
  - text: Got it.
  - text: I see.
  - text: Ok.
  - text: Alright.
  
  utter_negative_conv_marker:
  - text: Ok, no problem.
  - text: Alright, that's fine.
  - text: That's fine.

  utter_will_ask_medical_questions:
  - text: I see, I am going to ask you some detailed questions to be as accurate as possible, don't worry if you can't answer fully.
  
  utter_proceed_asking_pain:
  - text: Ok, now could you tell me more about your problem?
  - text: Thank you, now can you tell me what problem are you experiencing?

  utter_question_issue:
  - text: Tell me what's the issue.
  - text: What is your emergency?
  - text: What is the problem you are experiencing?

  utter_repeat_last_time:
  - text: Let's retry one last time.

  utter_please_rephrase:
  - text: I'm sorry, I didn't quite understand that. Could you rephrase?
  - text: Could you please rephrase that? I'm having trouble understanding.
  - text: I didn't grasp your message completely. Can you put it differently?
  - text: I'm a bit confused; can you reword your statement for clarity?
  - text: Sorry, I didn't catch that. Could you express it in another way?

  utter_greet:
  - text: Hello, this is the Ambulance Emergency Dispatcher. To talk with a human operator, just ask anytime.

  utter_please_specify_pathology:
  - text: Sorry, I need you to give me some details about your pathology first.

  utter_please_provide_general_info:
  - text: Ok, to possibly send help for your emergency, I need some details first.
  - text: Ok, I'm going to ask you some contact details first.

  # =================================================

  ask_patient_homeaddr:
  - text: Can you {verb} your home address, please?
  
  utter_invalid_patient_homeaddr:
  - text: I'm sorry, we can't find this address on the map.
  
  utter_ask_patient_phonenmbr:
  - text: And what's your phone number?

  utter_medical_questions_filled:
  - text: Ok, I have collected all the necessary info about your problem.
  
  utter_transferring_to_human:
  - text: Ok, I'm transferring you to a human operator.
  - text: Alright, I'll connect you to a human operator.
  - text: Sure thing, I'll transfer you to a human agent.
  - text: No worries, I'm redirecting you to a human operator.
  - text: Okay, I'm putting you through to a human agent.
  - text: Understood, initiating transfer to a human operator.

  utter_ask_dispatch_ambulance:
  - text: I can provide you with some general indications about your problem. But first, Would you like to receive assistance through an ambulance?
  - text: I can answer to some common questions about your problem. But first, do you want us to send an ambulance to your house?

  utter_confirm_ambulance_sent:
  - text: An ambulance has been dispatched to your address.
  - text: Paramedics are on their way.

  utter_ask_any_questions:
  - text: Do you have any questions?

  utter_goodbye:
  - text: Alright, I hope I've been helpful. For any question, ask right away anytime!
  
  utter_start_QA:
  - text: Alright, you can ask any general information about your problem, please remember you can always speak with a human operator, just ask it! 


  # ============== General medical questions ==============
  
  utter_ask_pain_duration:
  - text: When did you first notice the problem, what term describes it the most? E.g. Continuous, intermittent, first occurrence, sudden, n-th time. 
  - text: When did the problem first catch your attention, and how would you characterize it? For instance, was it continuous, intermittent, a sudden onset, or perhaps the n-th occurrence?
  - text: At what point did you initially become aware of the discomfort, and which term best describes it? Choose from options like continuous, intermittent, first occurrence, sudden onset, or the n-th time.

  utter_ask_pain_severity:
  - text: On a scale from "dull" to "moderate" and "severe", how would you describe your sensation? Do you feel some strong pain?
  - text: How would you rate your current sensation, ranging from "mild" to "moderate" and "intense"? Are you experiencing any significant pain?
  - text: On a scale from "subtle" to "moderate" and "intense," how would you characterize your current sensation? Do you perceive any notable pain?

  # ============== Abdominal pain questions ==============
  utter_ask_abdominal_pain_area:
  - text: Where exactly in your body do you feel the discomfort? (e.g., upper or lower abdomen, left side, close to the belly button or the ribs)
  - text: Can you pinpoint the specific location of the symptoms? (e.g., upper or lower abdomen, left side, close to the belly button or the ribs)
  - text: In which area of your body is the pain most concentrated? (e.g., upper or lower abdomen, left side, close to the belly button or the ribs)

  # ============== Respiratory difficulty questions ==============
  utter_ask_resp_difficulty_triggers:
  - text: Can you identify one of the following as potential causes for your respiratory distress? Pollution, allergens, smoke, mold, pollen, dust.
  - text: What are some probable factors contributing to your respiratory distress, such as pollution, allergens, smoke, mold, pollen, and dust?
  - text: Could you pinpoint any potential triggers for your respiratory distress from the following options, pollution, allergens, smoke, mold, pollen, or dust?
  
  # ============== Fainting questions ==============
  utter_ask_fainting_prior:
  - text: Did you identify any of the following warning signs before fainting? Dizziness, lightheadedness, nausea, sweating, blurred vision.
  - text: Have you experienced any of the warning signs like dizziness, lightheadedness, nausea, sweating, or blurred vision before fainting?
  - text: Before fainting, did you notice any of the following indicators, dizziness, lightheadedness, nausea, sweating, or blurred vision?

  utter_ask_fainting_medical_conditions:
  - text: Do you have medical conditions corresponding with the following, low blood sugar (hypoglycemia), dehydration, heart rhythm abnormalities (arrhythmias), low blood pressure (hypotension), or anemia?
  - text: Do you experience any health issues related to low blood sugar (hypoglycemia), dehydration, heart rhythm abnormalities (arrhythmias), low blood pressure (hypotension), or anemia?
  - text: Have you been diagnosed with or do you have medical conditions such as low blood sugar (hypoglycemia), dehydration, heart rhythm abnormalities (arrhythmias), low blood pressure (hypotension), or anemia?
  
  # ============== Hypothermia pain questions ==============
  utter_ask_hypothermia_skin_color:
  - text: Have you noticed any changes in your skin color or temperature, such as paleness or coolness to the touch?
  - text: Have you observed any alterations in your skin's color or temperature, such as becoming paler or cooler to the touch?
  - text: Did your skin color change?

  utter_ask_hypothermia_env:
  - text: Can you describe the circumstances that led to your exposure to cold temperatures?
  - text: Could you provide details about the situation that resulted in your exposure to low temperatures?
  - text: Please share information about the conditions that led to your being exposed to cold temperatures.

  # ============== allergy questions ==============
  utter_ask_allergy_cause:
  - text: Are you aware of any specific allergen exposure or trigger that might have caused the reaction?
  - text: Have you recently consumed any new foods or medications?
  - text: Were you exposed to any environmental factors, such as insect stings or plants?

  utter_ask_allergy_symptoms:
  - text: Are you experiencing any difficulty breathing or shortness of breath?
  - text: Have you noticed any swelling in your face, lips, tongue, or throat?
  - text: Are there any gastrointestinal symptoms, such as abdominal pain, nausea, or vomiting?

  utter_ask_allergy_history:
  - text: Do you have a history of allergies or allergic reactions?
  - text: Have you experienced any allergic reaction in the past?

  # ============== fall questions ==============
  utter_ask_conscious:
  - text: Are you conscious and able to communicate clearly?
  - text: Have you lost consciousness at any point since the fall?
  
  utter_ask_movement: 
  - text: Can you move your limbs? Any difficulty moving your arms or legs?
  - text: Have you attempted to stand or move since the fall?

  # ============== fever questions ==============
  utter_ask_temperature:
  - text: Have you measured your temperature, and if so, what was it?
  - text: Have you checked your temperature, and if yes, what was the result?
  - text: Were you able to measure your temperature, and if you were, what did it show?

  utter_ask_travel:
  - text: Have you recently traveled to any new locations or been in contact with sick individuals?
  - text: Did you travel to some high-risk areas before?
  # ============== headache question =============
  utter_ask_headache_lifestyle:
  - text: How would you describe your sleep patterns?
  - text: Has there been any change in your sleep habits?
  - text: Can you provide details about your typical sleep patterns?

  # =================================================

forms:
  form_general_info:
    required_slots:
      - patient_homeaddr
      - patient_phonenmbr
